<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
 <html>
 	<head>
 		<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
 		<title>TSDS Generator</title>
 		<link rel="stylesheet" type="text/css" href="asset/main.css">
 		<script type="text/javascript" src="deps/1.7.2/jquery.min.js"></script>
 		<script type="text/javascript" src="deps/autosize/jquery.autosize-min.js"></script>
 		<script type="text/javascript" src="deps/strftime.js"></script>
 		<script type="text/javascript" src="deps/sprintf-0.7-beta1.js"></script>	
 		<script type="text/javascript" src="deps/date.js"></script>
 		<script type="text/javascript" src="tsdsgen-default.js"></script>
 		 <script type="text/javascript" src="tsdsgen.js"></script>
 	</head>
	<script>
		$(document).ready(function(){
			
			$('#CatalogName').val(CatalogDescription["Name"]);
			$('#CatalogID').val(CatalogDescription["ID"]);
			$('#CatalogDescription').val(CatalogDescription["Description"] || CatalogDescription["Name"]	);
			$('#Template').val(Template);
			$('#LineTemplate').val(LineTemplate);
			$('#LineRegex').val(LineRegex);
			$('#ColumnUnits').val(ColumnUnits);
			var tmp = JSON.stringify(DatasetDescription).replace(/\],\[/g,"\n").replace("[[","").replace("]]","").replace(/\"/g,"");
			//console.log(tmp)
			$('#Dataset').text(tmp);
			$('#ColumnLabels').val(JSON.stringify(ColumnLabels));
			$('#ColumnLongnames').val(JSON.stringify(ColumnLongnames));
			$('#ColumnGroupings').val(JSON.stringify(ColumnGroupings));
			$('#ColumnGroupnames').val(JSON.stringify(ColumnGroupnames));
			$('#ColumnGrouptypes').val(JSON.stringify(ColumnGrouptypes));

			$('#startmin').val(Start);
			$('#stopmax').val(Stop);
			
			$('input[type=button].try').click(
				function () {
					$('textarea.try').val('');						
					$('input[type=button].try').each(function() {expandtemplate(this)});
					links();
				});

			$('textarea').autosize();
			
			$("textarea.try").mouseenter(function() {
				// Remove last newline.
				$(this).val($(this).val().replace(/^\s+|\s+$/g, ""));
				// Trigger autosize event.
				$(this).trigger("oninput");
			});
			$("textarea.try").mouseout(function() {
				$(this).height("1.5em");
			});

			//setInterval(detectchange,500);
			$('input[type=button].try').click();				
			guessstartstop();

		});

		</script>
 	<body>
 	<div id="submiturl"></div>
 	<div style="width:50%">
 	<form id="form" action="/" method="post">
 		<input type="submit" class="try" value="Submit">
		<br/>
		* Catalog Name
 		<br/>
 		<input class="enter" type="text" id="CatalogName"></input>
 		<br/>
		* Catalog ID
 		<br/>
 		<input class="enter" type="text" id="CatalogID"></input>
 		<br/>
		Catalog Description (If not specified, Catalog Name is used.)
 		<br/>
 		<input class="enter" type="text" id="CatalogDescription"></input>
 		<br/>
 		* Column units
 		<br/>
 		<input type="text" id="ColumnUnits"></input>
 		<br/>
 		<br/>
 		<hr/>
		<br/>
 		* Dataset description, [ID, other info].  (If not specified, ID is generated based on Dataset Description.)
 		<br>
 		<textarea class="enter" id="Dataset"></textarea>
 		<br/>
 		Column labels
 		<br/>
 		<input type='text' id="ColumnLabels" class="enter"></input>
 		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea class="try"></textarea>
 		<br/>
 		Column description
 		<br/>
 		<input type="text" id="ColumnLongnames" class="enter"></input>
		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea class="try"></textarea>
 		<br/>
 		Column groupings
 		<br/>
 		<input type="text" id="ColumnGroupings" class="enter"></input>
		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea class="try"></textarea>
 		<br/>
 		Column group names
 		<br/>
 		<input type="text" id="ColumnGroupnames" class="enter"></input>
		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea class="try"></textarea>
 		<br/>
 		Column group types
 		<br/>
 		<input type='text' id="ColumnGrouptypes" class="enter"></input>
		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea class="try"></textarea>
 		<br/>
		<br/>
 		<hr/>	
 		* Data line regular expression <input id="trydataregex" type="button" class="guessajax" value="Try">
 		<br/>
 		<input type="text" id="LineRegex"></input>
 		<br/>
		* Data Line Template <input id="trydatatemplate" type="button" class="guessajax" value="Try">
  		<input type="text" id="LineTemplate"></input>
 		<hr/>	
 		<br/>
 		* URL template
 		<br/>
 		<input type="text" id="Template" class="enter"></input>
 		<input type="button" class="try" value="Expand">
 		<br/>
 		<textarea id="templateexpanded" class="try"></textarea>
 		<br/>
 		<br/>
 		Data urls
 		<input id="checkdataurls" type="button" onclick="tryajax(this)" value="Check">
 		<span id="checkdataurls_span" style="display:none">
 			<span id="results"></span>
 		</span>
 		<br/>
  		<textarea id="urls" class="try"></textarea>
 		<br/>
 		<br/>
 		<div id="urlsvalid" style="display:none">
	 		Valid data urls
	 		<br/>
	  		<textarea id="urlsv" class="try"></textarea>
	 		<br/>
	 		<br/>
 		</div>
 		<div id="urlsinvalid" style="display:none">
	 		Invalid data urls
	 		<br/>
	  		<textarea id="urlsiv" class="try"></textarea>
	 		<br/>
	 		<br/>
 		</div>
 		* Start date min (YYYY-MM-DD)
 		<br/>
 		<input type="text" id="startmin" class="enter"></input>
 		<br/>
 		Start dates <span id="guessstartnote" style="display:none"></span>
 		<br/> 		
 		<textarea id="startdates" class="try"></textarea>
 		<br/>
 		<br/> 		
 		* Stop date max 
 		<br/>
 		<input type="text" id="stopmax" class="enter"></input>
 		<br/>
 		Stop dates <span id="guessstopnote" style="display:none"></span>
 		<br/> 		
 		<textarea id="stopdates" class="try"></textarea>
 		<br/> 		
 		<br/>
		Plot urls <input id="createplots" type="button" class="guessajax" value="Create">
 		<br/>
 		<textarea id="aurls" class="try"></textarea>
		<br/>
		<br/>
		catalog.thredds:
		<br/>
	 	<textarea class="try" id="catalog"></textarea>
		<br/>
		<input type="submit" class="try" value="Submit">
 	</form>
 	</div>
 	</body>
 </html>